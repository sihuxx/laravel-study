## 03 라라벨 내장함수

### (1) 라우트 (Route)

#### `Route::get()`

* **의미** - 데이터를 조회하거나 화면을 보여줄 때 사용하는 라우트
* **사용법** - `Route::get('/posts', [PostController::class, 'index']);`
* **특징** - 주소창에 직접 입력해서 이동하는 모든 방식은 GET 방식임

#### `Route::post()`

* **의미** - 폼(Form) 데이터를 전송하여 저장할 때 사용하는 라우트
* **사용법** - `Route::post('/posts', [PostController::class, 'store']);`
* **특징** - `@csrf` 토큰이 없으면 보안 에러 발생

#### `name()`

* **의미** - 라우트에 '별명' 붙이기
* **사용법** - `Route::get(...)->name('posts');`
* **특징** - URL 주소가 바뀌어도 별명만 같으면 코드를 수정할 필요가 없음 (유지보수 필수)

---

### (2) 컨트롤러 (Controller)

#### `$request->validate()`

* **의미** - 유효성 검사 (입력값 규칙 확인)
* **사용법** - `$request->validate(['title' => 'required']);`
* **특징** - 규칙에 어긋나면 자동으로 에러 메시지와 함께 직전 페이지로 돌려보냄

#### `$request->all()`

* **의미** - 입력된 모든 데이터 확인
* **사용법** - `dd($request->all());`
* **특징** - 디버깅 용도로 데이터가 잘 넘어왔는지 확인할 때 주로 사용

#### `view()`

* **의미** - 블레이드 뷰 파일(.blade.php) 화면 출력
* **사용법** - `return view('posts.index');`
* **특징** - `resources/views` 폴더 기준, 점(.)으로 하위 폴더 구분

#### `redirect()`

* **의미** - 다른 URL 주소로 강제 이동
* **사용법** - `return redirect('/home');`
* **특징** - 데이터 처리(저장/삭제) 후 결과 화면으로 보낼 때 사용

#### `route()` (함수)

* **의미** - 라우트 별명으로 주소 생성
* **사용법** - `return redirect()->route('posts.index');`
* **특징** - `redirect`와 함께 쓰여 별명으로 이동시킴 (하드코딩 방지)

#### `back()`

* **의미** - 직전 페이지로 복귀
* **사용법** - `return back();`
* **특징** - 삭제 취소나 에러 발생 시 원래 있던 곳으로 돌려보낼 때 유용

#### `compact()`

* **의미** - 변수를 뷰(View)로 넘겨주는 포장지
* **사용법** - `return view('index', compact('posts'));`
* **특징** - `['posts' => $posts]` 배열을 만드는 번거로움을 줄여줌

---

### (3) 모델 (Model)

#### `create()`

* **의미** - DB에 데이터 저장 (Insert)
* **사용법** - `Post::create(['title' => '안녕', 'content' => '반가워']);`
* **특징** - 모델 파일에 `$fillable` 설정이 꼭 되어 있어야 작동 (보안 문지기 역할)

#### `update()`

* **의미** - 데이터 수정
* **사용법** - `$post->update(['title' => '수정됨']);`
* **특징** - 먼저 데이터를 찾은(`find`) 변수에서 호출해야 함

#### `delete()`

* **의미** - 데이터 삭제
* **사용법** - `$post->delete();`
* **특징** - 데이터를 찾은(`find`) 후 삭제 실행

#### `all()`

* **의미** - DB에 저장된 모든 정보 다 가져오기
* **사용법** - `$posts = Post::all();`
* **특징** - 조건 없이 테이블의 모든 행을 긁어옴 (데이터 많으면 주의)

#### `find($id)`

* **의미** - Primary Key(id)로 단 하나의 데이터 찾기
* **사용법** - `$post = Post::find(1);`
* **특징** - 존재하지 않는 id면 `null` 반환

#### `findOrFail($id)`

* **의미** - id로 찾되, 없으면 404 에러 발생
* **사용법** - `$post = Post::findOrFail(1);`
* **특징** - `find`보다 안전함. 데이터가 없으면 "페이지를 찾을 수 없음" 화면을 띄워줌

#### `where()`

* **의미** - 검색 조건 설정 (SQL의 WHERE절)
* **사용법** - `Post::where('writer', '철수')`
* **특징** - 단독으로 쓰이지 않고 뒤에 `get()`이나 `first()`가 와야 실행됨

#### `orderBy()`

* **의미** - 데이터를 특정 컬럼 기준으로 정렬하기
* **사용법** - `Post::orderBy('created_at', 'desc')->get();`
* **특징** - 두 번째 인자로 `'asc'`(오름차순/기본값) 또는 `'desc'`(내림차순/최신순)를 지정함. 반드시 뒤에 `get()`이나 `first()`가 와야 실행됨

#### `get()`

* **의미** - 조건에 맞는 데이터 목록 가져오기 (실행)
* **사용법** - `Post::where('views', '>', 10)->get();`
* **특징** - `where` 조건절을 마무리하고 결과를 배열(Collection) 형태로 반환

#### `first()`

* **의미** - 조건에 맞는 데이터 중 맨 처음 1개만 가져오기
* **사용법** - `Post::where('title', '공지')->first();`
* **특징** - 목록이 아니라 단일 객체를 반환함

#### `latest()`

* **의미** - 최신순 정렬
* **사용법** - `Post::latest()->get();`
* **특징** - `orderBy('created_at', 'desc')`와 동일한 기능을 짧게 쓴 것

---

### (4) 뷰 (View)

#### `asset()`

* **의미** - public 폴더 내의 정적 파일 경로 생성
* **사용법** - `<img src="{{ asset('img/logo.png') }}">`
* **특징** - CSS, JS, 이미지 파일 불러올 때 필수

#### `@csrf`

* **의미** - CSRF 공격 방지 토큰 생성
* **사용법** - `<form> @csrf ... </form>`
* **특징** - 폼 전송 시 누락하면 419 Page Expired 에러 발생

#### `@method()`

* **의미** - HTML 폼 메서드 우회 (PUT, DELETE 등)
* **사용법** - `<form ...> @method('DELETE') ... </form>`
* **특징** - HTML 폼은 GET/POST만 지원하므로, 수정/삭제 시 이 지시어를 사용해야 함

---

### (5) 유틸리티 (Helper)

#### `dd()`

* **의미** - Dump and Die (데이터 확인 후 프로세스 종료)
* **사용법** - `dd($request->all());`
* **특징** - 개발 중 데이터가 제대로 넘어오는지 확인할 때 가장 많이 쓰는 디버깅 함수

#### `auth()->user()`

* **의미** - 현재 로그인한 사용자 정보 객체 반환
* **사용법** - `{{ auth()->user()->name }}`
* **특징** - 로그인 안 된 상태에서 호출하면 에러 발생 가능성 있음

#### `auth()->check()`

* **의미** - 현재 로그인 상태인지 확인 (True/False)
* **사용법** - `@if(auth()->check()) ... @endif`
* **특징** - 로그인한 사람에게만 특정 버튼을 보여줄 때 사용

#### `auth()->id()`

* **의미** - 현재 로그인한 사용자의 고유 ID 번호
* **사용법** - `'user_id' => auth()->id()`
* **특징** - 게시글 저장 시 작성자 ID를 DB에 넣을 때 간편함